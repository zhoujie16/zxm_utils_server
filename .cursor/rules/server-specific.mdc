---
description: åç«¯å¼€å‘è§„èŒƒ - NestJS + TypeScript + SQLite
globs: ['apps/server/**/*']
alwaysApply: false
---

# ğŸ—ï¸ åç«¯å¼€å‘è§„èŒƒ (Server)

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### æ¶æ„è®¾è®¡

- âœ… **æ¨¡å—åŒ–ç»„ç»‡**: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ä»£ç ç»“æ„
- âœ… **ä¾èµ–æ³¨å…¥**: å……åˆ†åˆ©ç”¨NestJSçš„DIç³»ç»Ÿ
- âœ… **åˆ†å±‚æ¶æ„**: éµå¾ªController â†’ Service â†’ Repositoryæ¨¡å¼

### å“åº”è§„èŒƒ

- âœ… **HTTPçŠ¶æ€ç **: ä½¿ç”¨æ ‡å‡†HTTPçŠ¶æ€ç 
- âœ… **ç›´æ¥è¿”å›**: ç›´æ¥è¿”å›ä¸šåŠ¡æ•°æ®ï¼Œä¸è¿›è¡ŒåŒ…è£…

## ğŸ“‹ DTOä¸éªŒè¯è§„èŒƒ

### DTOè®¾è®¡åŸåˆ™

- âœ… **éªŒè¯è§„åˆ™**: ä½¿ç”¨class-validatorè¿›è¡Œæ•°æ®éªŒè¯
- âœ… **æ–‡æ¡£ç”Ÿæˆ**: ä½¿ç”¨Swaggerè£…é¥°å™¨ç”ŸæˆAPIæ–‡æ¡£

### åˆ›å»ºDTOè§„èŒƒ

- âœ… ä½¿ç”¨@ApiPropertyè£…é¥°å™¨æ·»åŠ æ–‡æ¡£
- âœ… ä½¿ç”¨@IsNotEmptyã€@IsStringç­‰éªŒè¯è£…é¥°å™¨
- âœ… æä¾›æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯

### æŸ¥è¯¢DTOè§„èŒƒ

- âœ… æ”¯æŒåˆ†é¡µå‚æ•°ï¼ˆpageã€limitï¼‰
- âœ… æ”¯æŒæœç´¢å…³é”®è¯å’Œæ’åº
- âœ… æ‰€æœ‰å‚æ•°éƒ½æ˜¯å¯é€‰çš„

## ğŸ—„ï¸ SQLite Entityè§„èŒƒ

### Entityè§„èŒƒ

- âœ… ä½¿ç”¨@Entityè£…é¥°å™¨å®šä¹‰å®ä½“
- âœ… ä½¿ç”¨@PrimaryGeneratedColumnè£…é¥°å™¨å®šä¹‰ä¸»é”®
- âœ… ä½¿ç”¨@Indexè£…é¥°å™¨ä¸ºæŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- âœ… ä½¿ç”¨@ApiPropertyæ·»åŠ Swaggeræ–‡æ¡£

## ğŸ” æŸ¥è¯¢ä¼˜åŒ–è§„èŒƒ

### åˆ†é¡µæŸ¥è¯¢è§„èŒƒ

- âœ… ä½¿ç”¨Promise.allå¹¶è¡Œæ‰§è¡ŒæŸ¥è¯¢å’Œè®¡æ•°
- âœ… è¿”å›æ ‡å‡†åˆ†é¡µå“åº”æ ¼å¼

## ğŸ“Š APIå“åº”è§„èŒƒ

### HTTPçŠ¶æ€ç è§„èŒƒ

- âœ… 200: æˆåŠŸå“åº”
- âœ… 400: è¯·æ±‚å‚æ•°é”™è¯¯
- âœ… 401: æœªæˆæƒè®¿é—®
- âœ… 404: èµ„æºæœªæ‰¾åˆ°
- âœ… 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
- âœ… ç›´æ¥è¿”å›ä¸šåŠ¡æ•°æ®ï¼Œä¸è¿›è¡Œé¢å¤–åŒ…è£…


## ğŸš¨ å¼ºåˆ¶è¦æ±‚

1. **è¾“å…¥éªŒè¯**: æ‰€æœ‰å¤–éƒ¨è¾“å…¥å¿…é¡»ä½¿ç”¨class-validatoréªŒè¯
2. **APIæ–‡æ¡£**: æ‰€æœ‰APIæ¥å£å¿…é¡»æ·»åŠ Swaggeræ–‡æ¡£æ³¨é‡Š
3. **å®‰å…¨è®¤è¯**: æ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£å¿…é¡»ä½¿ç”¨JWTè®¤è¯
4. **HTTPçŠ¶æ€ç **: ä½¿ç”¨æ ‡å‡†HTTPçŠ¶æ€ç ï¼Œç›´æ¥è¿”å›ä¸šåŠ¡æ•°æ®

> å…¶ä»–é€šç”¨è§„èŒƒè¯·å‚è€ƒ `base.mdc`